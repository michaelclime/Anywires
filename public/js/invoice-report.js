const REPORTS = [{
    Updated: "Jul 31, 2019",
    Sol_Name: "Serbia (EUR) VTK",
    Merchant: "Lions",
    Sent: 11684, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Approved"
},{
    Updated: "Jul 31, 2019",
    Sol_Name: "Poland (EUR) VTK 200",
    Merchant: "CMP24",
    Sent: 11684, 
    Bank_Comm: 0,
    Received: 12443,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 221.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Requested"
},{
    Updated: "Jul 31, 2019",
    Sol_Name: "Poland (EUR) VTK 200",
    Merchant: "CMP24",
    Sent: 11684, 
    Bank_Comm: 0,
    Received: 12443,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 221.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Settled"
},{
    Updated: "Jul 31, 2019",
    Sol_Name: "BNP Poland (EUR) VTK",
    Merchant: "CMP24",
    Sent: 15648, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Approved"
},{
    Updated: "Aug 2, 2019",
    Sol_Name: "Poland EUR Masheri BNP",
    Merchant: "CK",
    Sent: 12222, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Requested"
},{
    Updated: "Aug 3, 2019",
    Sol_Name: "Poland EUR Masheri BNP",
    Merchant: "Omer",
    Sent: 23124, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Approved"
},{
    Updated: "Aug 3, 2019",
    Sol_Name: "Poland EUR Masheri BNP",
    Merchant: "Omer",
    Sent: 23124, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Declined"
},{
    Updated: "Aug 2, 2019",
    Sol_Name: "Poland EUR Masheri BNP",
    Merchant: "CK",
    Sent: 12222, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Sent"
},{
    Updated: "Aug 2, 2019",
    Sol_Name: "Poland EUR Masheri BNP",
    Merchant: "CK",
    Sent: 12222, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Approved"
},{
    Updated: "Aug 2, 2019",
    Sol_Name: "Poland EUR Masheri BNP",
    Merchant: "CK",
    Sent: 12222, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Declined"
},{
    Updated: "Aug 4, 2019",
    Sol_Name: "BNP Poland (EUR) VTK",
    Merchant: "Lions",
    Sent: 15000, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Sent"
},{
    Updated: "Aug 5, 2019",
    Sol_Name: "Serbia (EUR) VTK",
    Merchant: "GigaFX",
    Sent: 15000, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Settled"
},{
    Updated: "Aug 1, 2019",
    Sol_Name: "Poland EUR Masheri BNP",
    Merchant: "CMP24",
    Sent: 12200, 
    Bank_Comm: 0,
    Received: 19000,
    AW_Comm: 1050.0,
    Approved: 11250,
    Sol_Comm: 475.0,
    AW_Amnt: 12625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 555.0,
    State: "Sent"
},{
    Updated: "Jul 31, 2019",
    Sol_Name: "Serbia (EUR) VTK",
    Merchant: "CMP24",
    Sent: 11684, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Approved"
},{
    Updated: "Jul 31, 2019",
    Sol_Name: "Poland (EUR) VTK 200",
    Merchant: "CMP24",
    Sent: 11684, 
    Bank_Comm: 0,
    Received: 12443,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 221.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Settled"
},{
    Updated: "Jul 31, 2019",
    Sol_Name: "BNP Poland (EUR) VTK",
    Merchant: "CMP24",
    Sent: 15648, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Approved"
},{
    Updated: "Aug 2, 2019",
    Sol_Name: "Poland EUR Masheri BNP",
    Merchant: "CK",
    Sent: 12222, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Requested"
},{
    Updated: "Aug 3, 2019",
    Sol_Name: "Poland EUR Masheri BNP",
    Merchant: "Omer",
    Sent: 23124, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Declined"
},{
    Updated: "Aug 2, 2019",
    Sol_Name: "Poland EUR Masheri BNP",
    Merchant: "CK",
    Sent: 12222, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Sent"
},{
    Updated: "Aug 2, 2019",
    Sol_Name: "Poland EUR Masheri BNP",
    Merchant: "CK",
    Sent: 12222, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Declined"
},{
    Updated: "Aug 4, 2019",
    Sol_Name: "BNP Poland (EUR) VTK",
    Merchant: "Lions",
    Sent: 15000, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Sent"
},{
    Updated: "Aug 5, 2019",
    Sol_Name: "Serbia (EUR) VTK",
    Merchant: "GigaFX",
    Sent: 15000, 
    Bank_Comm: 0,
    Received: 15000,
    AW_Comm: 1050.0,
    Approved: 13950,
    Sol_Comm: 375.0,
    AW_Amnt: 14625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 675.0,
    State: "Settled"
},{
    Updated: "Aug 1, 2019",
    Sol_Name: "Poland EUR Masheri BNP",
    Merchant: "CMP24",
    Sent: 12200, 
    Bank_Comm: 0,
    Received: 19000,
    AW_Comm: 1050.0,
    Approved: 11250,
    Sol_Comm: 475.0,
    AW_Amnt: 12625.0,
    AW_Settle_Comm: "-",
    AW_Profit: 555.0,
    State: "Sent"
}];

class UsersList {
    constructor(){
        this.buttonSearch = document.getElementById("search-button");
        this.generate_btn = document.querySelector("#generate-btn");
        this.restore_btn = document.querySelector(".restoreBtn");
        this.render();
    }

    restoreList = () => {
        this.container = document.getElementById("table-list");
        if(REPORTS.length > this.container.rows.length){
            this.container.innerHTML = "";
            this.loadUsers(REPORTS);
        }
    }

    filterList = () => {
        this.status = document.querySelector(".selectorState").value;
        this.merchant = document.querySelector(".selectorMerchant").value;

        this.container = document.getElementById("table-list");
        this.container.innerHTML = "";

            if(this.status === "Status") {
                this.newArray = REPORTS.filter(element => element.Merchant === this.merchant);
            } else if(this.status != "Status" && this.merchant != "Merchant") {
                this.newArray = REPORTS.filter(element => element.State === this.status && element.Merchant === this.merchant);
            } else {
                this.newArray = REPORTS.filter(element => element.State === this.status);
            }
            
        
        this.loadUsers(this.newArray);
    }

    viewModal() {
        document.location.href = "InvoicePreview.html";
    }

    loadUsers(arr){
        this.container = document.getElementById("table-list");
        arr.forEach((item) => {
            var color = "";
            item.State === "Approved" ? color = "green" : "";
            item.State === "Declined" ? color = "red" : "";
            item.State === "Sent" ? color = "yellow" : "";

            this.userList = document.createElement("tr");
            this.userList.innerHTML =  `
                    <td class="column1">${item.Updated}</td> 
                    <td class="column2">${item.Sol_Name}</td> 
                    <td class="column3">${item.Merchant}</td> 
                    <td class="column4">${item.Sent}</td> 
                    <td class="column5">${item.Bank_Comm}</td>
                    <td class="column6">${item.Received}</td>
                    <td class="column7">${item.AW_Comm}</td>
                    <td class="column8">${item.Approved}</td>
                    <td class="column9">${item.Sol_Comm}</td>
                    <td class="column10">${item.AW_Amnt}</td>
                    <td class="column11">${item.AW_Settle_Comm}</td>
                    <td class="column12">${item.AW_Profit}</td>
                    <td class="column13 ${color}">${item.State}</td>
                    <td class="column14">
                        <button id="viewReport-btn">View</button>
                    </td>
            `;
        this.container.appendChild(this.userList);
        }) 
        
        this.viewBtn = document.querySelectorAll("#viewReport-btn");
        for(let i = 0; i < this.viewBtn.length; i++){
            this.viewBtn[i].addEventListener("click", this.viewModal);
        }
    }

   


    render(){
        this.loadUsers(REPORTS);
        this.generate_btn.addEventListener("click", this.filterList);
        this.restore_btn.addEventListener("click", this.restoreList);
    }
};

const userList = new UsersList();

