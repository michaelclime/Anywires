<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Users</title>
		<meta name="description" content="Anywires" />
		<meta name="keywords" content="Anywires" />
		<meta name="author" content="Anywires" />
		<link rel="shortcut icon" href="img/AnyWiresFavicon.png" type="image/png">
		<link rel="stylesheet" type="text/css" href="css/users.css" />
		<link rel="stylesheet" type="text/css" href="css/menu.css" />
		<link rel="stylesheet" type="text/css" href="css/menu-comp.css" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
		<link href="https://fonts.googleapis.com/css?family=Frank+Ruhl+Libre&display=swap" rel="stylesheet">
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<script src="js/modernizr.custom.js"></script>
		<script src="https://kit.fontawesome.com/b1090e9fd1.js"></script>

		<!-- Xls -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.15.1/xlsx.full.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"></script>
		
		<!-- Date picker -->
		<link rel="stylesheet" href="./css/datepicker.min.css">
		<script src="./js/datepicker.min.js"></script>
		<script src="./js/datepicker.en.js"></script>

		<!-- Moment JS -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
	</head>
	<body class="modal-open">
		<span class="curentUserId hide"><%= currentUser.id %></span>
		<span class="curentUserRole hide"><%= currentUser.role %></span>
		<span class="currentUserTypeClass hide"><%= currentUser.typeClass %></span>
			<div id="burgerMenu">
					<div class="menu">
						<ul id="gn-menu" class="gn-menu-main">
							<li class="gn-trigger">
								<a class="gn-icon gn-icon-menu"><span>Menu</span></a>
								<nav class="gn-menu-wrapper">
									<div class="gn-scroller">
										<ul class="gn-menu">
											<li><a href="dashBoardMainPage.html"><img class="icon" src="fonts/icons/dashboard.png">Dashboard</a></li>
											<li><a href='InvoiceGeneration.html'><img class="icon" src="fonts/icons/invoice.png">Invoice generation</a></li>
											<li><a href="invoice-list.html"><img class="icon" src="fonts/icons/invoice-list.png">Invoice list</a></li>
											<li><a href="wallets"><img class="icon" src="fonts/icons/wallet.png">Wallets</a></li>
											<li><a href="settlements.html"><img class="icon" src="fonts/icons/settlement.png">Settlements</a></li>
											<li><a href="merchants.html"><img class="icon" src="fonts/icons/merchant.png">Merchants</a></li>
											<li><a href='users.html'><img class="icon" src="fonts/icons/users.png">Users</a></li>
											<li class="gn-menu__banks"><a href='banks.html'><img class="icon" src="fonts/icons/bank.png">Banks</a></li>
											<li id="reports"><a><img class="icon" src="fonts/icons/invoice-report.png">Reports</a></li>
											<ul class="gn-submenu" id="allReports">
												<li><a href="invoice-report.html"><img class="icon" src="fonts/icons/aff-report.png">Invoices report</a></li>
												<li><a href="settlementReport.html"><img class="icon" src="fonts/icons/aff-report.png">Settlements report</a></li>
												<li><a href="affiliateReport.html"><img class="icon" src="fonts/icons/aff-report.png">Affiliates report</a></li>
												<li><a href="commission-report"><img class="icon" src="fonts/icons/aff-report.png">Commission report</a></li>
												<li><a href="merchant-report"><img class="icon" src="fonts/icons/aff-report.png">Merchant report</a></li>
											</ul>
											<li><a href='Dashboard-how-it-works.html'><img class="icon" src="fonts/icons/info.png">How it works</a></li>
												</ul>
											</li>
										</ul>
									</div>
								</nav>
							</li>
						</ul>
			
						<div class="authorizationMenu">
							<span> 
								<span class="userName"> <%= currentUser.fullname %></span>
								<span class="userLogo"><i class="far fa-user-circle"></i></span>
							</span>
							<ul class="dropMenu">
								<li class="profile">
									<span class="liLogo"><i class="fas fa-user-alt"></i></span>
									<a href="personal-area.html">Profile</a>
								</li>
								<li class="merchant">
									<span class="liLogo"><i class="fab fa-chromecast"></i></span>
									<a href="merchants.html">Merchant</a>
								</li>
								<li class="logOut">
									<span class="liLogo"><i class="fas fa-sign-out-alt"></i></span>
									<a href="/logout/<%= currentUser.id %>">LogOut</a>
								</li>
							</ul>
						</div>
					</div><!-- /container -->
				
		<div id="wrapper">

			<!-- Loading GIF -->
			<div id="loadingGif">
				<img src="img/Gear-2.5s-200px.gif" alt="loading GIF"/>
				<div>Loading...</div>
			</div>
			<!-- Loading GIF -->

			<!--Header Page-->
			<header> 
				<img src="./img/group.png" alt="icon page" width="40px" height="40px"/>
				<h1>Users</h1>
			</header>
			
			<!--Main Page-->
			<main>
				<div class="containerBlock">
					<div class="filterBlock-first">
							<div class="lastLog-block" >
								<label for="lastLog-block">Last login date:</label>
								<input id="lastLog" class="dateForm datepicker-here clear" data-multiple-dates-separator=" — " 
																		data-range="true"
																		data-language="en"
																		type="text" 
																		placeholder="Jul 01, 2019 — Aug 01, 2019">
							</div>

							<div class="filterMerchant-block">
								<label for="filterMerchant-block">Mechant</label>
								<select id="merchant" class="clear" type="text">
										<option value="" selected></option>
								</select>
							</div>
	
							<div class="filterRole-block">
								<label for="filterRole-block">Role</label>
								<select class="clear" id="filterRole" type="text">
									<option value="" selected></option>
									<option value="Crm FinanceManager">CRM finance manager</option>
                                    <option value="Crm InvoiceManager">CRM invoice manager</option>
                                    <option value="Crm SuccessManager">CRM Success manager</option>
                                    <option value="Crm Admin">CRM admin</option>
                                    <option value="Merchant Manager">Merchant manager</option>
                                    <option value="Invoice Manager">Invoice manager</option>
                                    <option value="Affiliate">Affiliate</option>
                                    <option value="Solution Manager">Solution manager</option>
								</select>
							</div>
						</div>
				
						<div class="search-block">
							<input id="search-input" class="clear" type="search" placeholder="Search..."/>
							<img id="search-button" src="./img/magnifying-glass.png" alt="search button"/>
						</div>
				</div>

					<div id="createUser-block">
						<div>
							<button id="showBtn">Show</button>
							<button id="clearFilterBtn">Clear Filter</button>
						</div>
						<button id="createUser-button">Create User</button>
					</div>

				<div id="tableUser-block">
					<div class="tableUser-header">
						<h2>LIST OF USERS</h2>
						<div class="table-arrows">
							<img id="dowloadXLS" src="./img/download.png" alt="arrow right table" width="15px" height="15px"/>
						</div>
						<div class="xlsTip fadeInUp">
							<p>Download .xls</p>
						</div>
					</div>

					<div class="table-line "></div>

					<div class="test">
						<table id="table-user">
							<thead>
								<tr class="table-head">
									<th class="column1">Name</th>
									<th class="column2">Email</th>
									<th class="column3">Merchant</th>
									<th class="column4">Role</th>
									<th class="column5">Last login date</th>
								</tr>
							</thead>
							<tbody id="table-list"></tbody>
						</table>
					</div>

					<div class="nextPage-block"></div>
						
					
				</div>

			</main>
			
	
		</div>

		<!-- Modal Window "Create User" -->
		<% if (currentUser.typeClass == 'admin' && currentUser.role == 'Crm Admin') { %>
			<div class="popup">
					<div class="popup-dialog">
						<div class="popup-content">
							<img src="img/logocompany.png" alt="Anywires logo" class="logo">
							
							<div class="main-form popup-form">
								<form  action="/register" class="popup-form" method="POST">
									<div class="inputSection">
										<label for="username">Email</label>
										<input type="email" name="username" id="username" placeholder="Type here..." required>
									</div>
									<div class="inputSection">
										<label for="fullname">Full Name</label>
										<input type="text" name="fullname" id="fullname" placeholder="Type here..." required>
									</div>
									<div class="inputSection">
										<label for="password">Password</label>
										<input type="password" name="password" id="password" placeholder="Type here..." required>
									</div>
									<div class="inputSection">
										<label for="typeClass">Type</label>
										<select id="typeClass" class="selectMenu"  name="typeClass" required>
											<option value=""></option>
											<option value="admin">Admin</option>
											<option value="client">Client</option>
										</select>
									</div>
									<div class="inputSection">
										<label for="role">Role</label>
										<select id="role" class="selectMenu" name="role" required>
												<option value=""></option>
												<option value="Crm FinanceManager">CRM Finance manager</option>
												<option value="Crm InvoiceManager">CRM Invoice manager</option>
												<option value="Crm SuccessManager">CRM Success manager</option>
												<option value="Crm Admin">CRM admin</option>
												<option value="Merchant Manager">Merchant manager</option>
												<option value="Invoice Manager">Invoice manager</option>
												<option value="Affiliate">Affiliate</option>
												<option value="Solution Manager">Solution manager</option>
											</select>
									</div>
									<div class="inputSection">
										<label for="merchant1">Merchant </label>
										<span class="merchantChooseList"><i class="fas fa-sort-down"></i></span>
										
									</div>
									
									<div class="merchList">
										<span class="selectAllBox"></span>
										<div class="merchListContainer">
											<div class="leftBox"></div>
											<div class="rightBox"></div>
										</div>
									</div>

									<input type="submit" class="creatUserBtn" value="Creat A New User">
								</form>
							</div>
						</div>
					</div>
				</div>
		<%} else { %>
			<div class="popup">
					<div class="popup-dialog">
						<div class="popup-content">
							<img src="img/logocompany.png" alt="Anywires logo" class="logo">
							
							<div class="main-form popup-form">
								<form  action="/register" class="popup-form" method="POST">
									<div class="inputSection">
										<label for="username">Email</label>
										<input type="email" name="username" id="username" placeholder="Type here..." required>
									</div>
									<div class="inputSection">
										<label for="fullname">Full Name</label>
										<input type="text" name="fullname" id="fullname" placeholder="Type here..." required>
									</div>
									<div class="inputSection">
										<label for="password">Password</label>
										<input type="text" name="password" id="password" placeholder="Type here..." required>
									</div>
									<div class="inputSection hide">
										<label for="typeClass">Type</label>
										<select id="typeClass" class="selectMenu"  name="typeClass">
											<option value="client">Client</option>
										</select>
									</div>
									<div class="inputSection">
										<label for="role">Role</label>
										<select id="role" class="selectMenu" name="role" required>
												<option value=""></option>
												<option value="Merchant Manager">Merchant manager</option>
												<option value="Invoice Manager">Invoice manager</option>
												<option class="roleAff" value="Affiliate">Affiliate</option>
												<option class="roleSol" value="Solution Manager">Solution manager</option>
											</select>
									</div>

									<div class="inputSection">
										<label for="merchant1">Merchant </label>
										<span class="merchantChooseList"><i class="fas fa-sort-down"></i></span>
										
									</div>

									<div class="merchList">
										<span class="selectAllBox"></span>
										<div class="merchListContainer">
											<div class="leftBox"></div>
											<div class="rightBox"></div>
										</div>
									</div>
									
									<input type="submit" class="creatUserBtn" value="Creat A New User">
								</form>
							</div>
						</div>
					</div>
				</div>
		<% } %>
		<!-- Modal Action Window -->
		<% if(error && error.length > 0) {%>
			<div class="alert" role="alert">
				<div class="alertContent">
					<h3>  <%= error %> </h3>
				</div>
			</div>
		<% } %>
		<% if(success && success.length > 0) {%>
			<div class="alert" role="alert">
				<div class="alertContent">
					<h3>  <%= success %> </h3>
				</div>
			</div>
		<% } %>

		<!-- Hiden Table for download XLS -->
		<table id="table__xls">
			<thead>
				<th>Creation date</th> <th>Name</th> <th>Email</th> <th>Merchant</th> <th>Role</th> <th>Last Login</th>
			</thead>
			<tbody id="table__xls--tbody"></tbody>
		</table>

		<script src="js/registerForm.js"></script>
		<script src="js/authorizationMenu.js"></script>
		<script src="./js/users.js"></script>
		<script src="js/classie.js"></script>
		<script src="js/gnmenu.js"></script>
		<script src="js/menu.js"></script>
		<script>
			new gnMenu( document.getElementById( 'gn-menu' ) );
		</script>
	</body>
</html>