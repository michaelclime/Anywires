<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="Anywires" />
    <meta name="keywords" content="Anywires" />
    <meta name="author" content="Anywires" />
    <title>Settlements</title>
    <link rel="shortcut icon" href="img/AnyWiresFavicon.png" type="image/png">
    <link rel="stylesheet" href="css/settlements.css">
    <link rel="stylesheet" href="css/authorizationMenu.css">
    <script src="https://kit.fontawesome.com/5355902e87.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/menu.css" />
    <link rel="stylesheet" type="text/css" href="css/menu-comp.css" />
    <link rel="stylesheet" href="css/sweetalert2.css">
    <script src="js/modernizr.custom.js"></script>
    <!-- For Calendar Inputs -->
		<link rel="stylesheet" href="./css/datepicker.min.css">
		<script src="./js/datepicker.min.js"></script>
		<script src="./js/datepicker.en.js"></script>
</head>

<body>
     <!-- MENU -->
    <header>
        <div class="menu">
                <ul id="gn-menu" class="gn-menu-main">
                    <li class="gn-trigger">
                        <a class="gn-icon gn-icon-menu"><span>Menu</span></a>
                        <nav class="gn-menu-wrapper">
                            <div class="gn-scroller">
                                <ul class="gn-menu">
                                    <li><a href='dashBoardMainPage.html'><img class="icon" src="fonts/icons/dashboard.png">Dashboard</a></li>
                                    <li><a href='InvoiceGeneration.html'><img class="icon" src="fonts/icons/invoice.png">Invoice generation</a></li>
                                    <li><a href="invoice-list.html"><img class="icon" src="fonts/icons/invoice-list.png">Invoice list</a></li>
                                    <li><a href="wallets"><img class="icon" src="fonts/icons/wallet.png">Wallets</a></li>
                                    <li><a href="settlements.html"><img class="icon" src="fonts/icons/settlement.png">Settlements</a></li>
                                    <li><a href="merchants.html"><img class="icon" src="fonts/icons/merchant.png">Merchants</a></li>
                                    <li><a href='users.html'><img class="icon" src="fonts/icons/users.png">Users</a></li>
                                    <li><a href='banks.html'><img class="icon" src="fonts/icons/bank.png">Banks</a></li>
                                    <li id="reports"><a><img class="icon" src="fonts/icons/invoice-report.png">Reports</a></li>
                                    <ul class="gn-submenu" id="allReports">
										<li><a href="invoice-report.html"><img class="icon" src="fonts/icons/aff-report.png">Invoices report</a></li>
                                        <li><a href="merchantReport.html"><img class="icon" src="fonts/icons/aff-report.png">Merchants report</a></li>
                                        <li><a href="settlementReport.html"><img class="icon" src="fonts/icons/aff-report.png">Settlements report</a></li>
                                        <li><a href="affiliateReport.html"><img class="icon" src="fonts/icons/aff-report.png">Affiliates report</a></li>
                                        <li><a href="commission-report"><img class="icon" src="fonts/icons/aff-report.png">Commission report</a></li>
									</ul>
                                    <li><a href='Dashboard-how-it-works.html'><img class="icon" src="fonts/icons/info.png">How it works</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </nav>
                    </li>
                </ul>
            </div>
            <div class="authorizationMenu">
                <span> 
                    <span class="userName"> <%= currentUser.fullname %></span>
                    <span class="userLogo"><i class="far fa-user-circle"></i></span>
                </span>
                <ul class="dropMenu">
                    <li class="profile">
                        <span class="liLogo"><i class="fas fa-user-alt"></i></span>
                        <a href="personal-area.html">Profile</a>
                    </li>
                    <li class="merchant">
                        <span class="liLogo"><i class="fab fa-chromecast"></i></span>
                        <a href="merchants.html">Merchant</a>
                    </li>
                    <li class="logOut">
                        <span class="liLogo"><i class="fas fa-sign-out-alt"></i></span>
                        <a href="/logout">LogOut</a>
                    </li>
                </ul>
            </div>
    </header>
    <!-- CONTENT -->
    <main>
        <div class="headerBlock">
            <h1 class="mainTitle"><span class="affiliateReportlogo"></span><i class="fas fa-coins"></i></span>Settlements</h1> 
        </div>

        <div class="header-menu">
            <div class="filterBlock-first">
                <div class="byCreation-block" >
                    <label for="byCreation-block">Date</label>
                    <input class="dateForm datepicker-here" data-multiple-dates-separator="—" 
                                                            data-range="true"
                                                            data-language="en"
                                                            type="text" 
                                                            placeholder="Jul 01, 2019 — Aug 01, 2019">
                </div>
                
                <div class="filterStatus-block">
                    <label for="filterStatus-block">Status</label>
                    <select name="status" class="status" id="filterStatus">
                        <option value="" ></option>
                        <option value="Requested">Requested</option>
                        <option value="Sent">Sent</option>
                        <option value="Received">Received</option>
                        <option value="Declined">Declined</option>
                    </select>
                </div>

                <div class="filterBank-block">
                    <div class="filterMerchant-block">
                        <label for="filterMerchant-block">Merchant</label>
                        
                        <% if (currentUser.typeClass == 'admin') { %>
                            <select class="merchantList"  id="filterMerchantA">
                                <option value=""></option>
                            </select>
                        <% } else { %>
                        <% if (currentUser.merchant2 == 'null') { %>
                            <select class="merchantList"  id="filterMerchant">
                                <option value="<%= currentUser.merchant %>"><%= currentUser.merchant %></option>
                            </select>
                        <% } else { %>
                            <select class="merchantList"  id="filterMerchant">
                                <option value=""></option>
                                <option value="<%= currentUser.merchant %>"><%= currentUser.merchant %></option>
                                <option value="<%= currentUser.merchant2 %>"><%= currentUser.merchant2 %></option>
                            </select>
                        <% } } %>
                    </div>
                </div>
                
            </div>

            <div class="showClear-block">
                <div class="buttonsBlock">
                    <button class="btn filterBtn">Show</button>
                    <button class="btn showAllBtn">Clear</button>
                    <button class="btn payFromAwWalletBtn">Pay from AW Wallet</button>
                    <button class="btn settleTransfBtn">Settle Transfers</button>
                </div>
                <div class="searchBlock">
                    <input class="input-search" type="search" placeholder="Search..."/>
                    <img class="search-btn" src="./img/magnifying-glass.png" alt="Image Search">
                </div>
            </div>
        </div>
        
        <div id="table-block">
            <div class="table-header">
                <h2>Settlements List</h2>
            </div>

            <div class="table-line "></div>

            <div class="test">
                <table id="main-table">
                    <thead>
                        <tr class="table-head">
                            <th class="column0">Created By</th>
                            <th class="column1">Date</th>
                            <th class="column2">Amount Requested</th>
                            <th class="column3">Amount Sent</th>
                            <th class="column4">Type</th>
                            <th class="column5">Wallet</th>
                            <th class="column6">Status</th>
                        </tr>
                    </thead>
                    <tbody class="tableList"></tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Modal windows -->

    <!-- Settle Transfers Window -->
    <div class="SettleTransfersWindow">
            <div class="SettleTransfersWindow-content">
                <button class="SettleTransfersWindow-close">&times;</button>
                <h1 class="SettleTransfersWindow-h1">Please mark Available for Settlement invoices to include them to settlement.</h1>
                <form action="/creatSettle/<%= currentUser._id %>" method="POST">
                    <table id="ttable">
                        <thead>
                            <tr class="ttable-head">
                                <th class="column0">Name</th>
                                <th class="column1">Received</th>
                                <th class="column2">Fee</th>
                                <th class="column3">Approved</th>
                            </tr>
                        </thead>
                        <tbody class="ttableList"></tbody>
                    </table>

                    <span class="totalSum" name="amount"></span>
                    
                   <div class="footBox">
                        <select class="walletList" name="wallets" required>
                            <option value="">Wallet for Settlement:</option>
                        </select>
                        <input type="submit" value="Request" class="requestBtn">
                   </div>
                </form>
            </div>
    </div>

    <!-- Merchant Pay Window -->
    <div class="MerchantPayWindow">
            <div class="MerchantPayWindow-content">
                <button class="MerchantPayWindow-close">&times;</button>
                <h1 class="MerchantPayWindow-header">Payment from your AW Wallet</h1>
                <div>
                    <form action="/creatSettleFromAwWallet/<%= currentUser._id %>" method="POST"  class="payFromAwWalletCont">
                    <div class="main-form MerchantPayWindow-form">
                        <h3 class="AWBalance-title">Your AW Balance is: <span class="AWBalance"></span></h3>
                            <div class="hide hide-currency"></div>
                            <div class="hide hide-type"></div>
                            <div class="hide hide-merchantID"></div>
                            <div class="hide hide-AwWalletId"></div>
                            <input type="number" class="amountPayment" placeholder="0" name="amountPaymentfromAW" required>
                            <select name="wallet" class="walletPayFrom" required>
                                <option value="">Choose your wallet</option>
                            </select>
                            <input type="text" class="paymentPurpose" placeholder="Payment Purpose" name="paymentPurpose">
                            <input type="submit" class="paymentBtn  popup-btn" value="Make a payment request">
                       
                    </div>

                    <div class="walletDetInfo">
                        <select name="inside_wallet" class="inside_wallet">
                            
                        </select>
                        <p><strong>Beneficiary Name:</strong>  <span class="beneficiaryName"></span></p>
                        <p><strong>Beneficiary Address:</strong> <span class="beneficiaryAddress"></span></p>
                        <p><strong>Bank Name:</strong> <span class="bankName"></span></p>
                        <p><strong>Bank Address:</strong> <span class="bankAddress"></span></p>
                        <p><strong>IBAN:</strong> <span class="iban"></span></p>
                        <p><strong>SWIFT:</strong> <span class="swift"></span></p>
                    </div>
                </form>    
                </div>
            </div>
    </div>
    
    <!-- Popup window View Invoice -->
		
    <div class="filter">
        <div class="modalView-block">
            <button class="settlementDetails-close">&times;</button>
            <div class="invoiceNum-block">
                <div>
                    <h1>Settlement details</h1>
                </div>
                <div id="settleMerchant">Merchant Name</div>
            </div>

            <div class="transfer-block">
                <p class="settleInfoTitle"></p>
                <div class="buttonBlock">
                    <div>
                        <button id="sent">Sent</button>
                        <button id="received">Received</button>
                        <button id="declined">Declined</button>  
                    </div>
                    <div  id="prevSettleBtn">
                        <button class="settlePrevBtn">Preview settlement</button>
                    </div>
                    
                </div>
                
            </div>

            <h3 class="documentsP">Documents</h3>

            <div class="actions-block">
                <div class="docs-block">
                    <div class="docTable-block">
                        <table id="docsTable">
                            <thead>
                                <tr>
                                    <th>Type</th> <th>Uploaded Date</th> <th></th>
                                </tr>
                            </thead>
                            <tbody id="table-docs"></tbody>
                        </table>
                    </div>

                    <div class="docsUpload-block">
                        <div class="docsInside-block">
                            <form id="uploadForm" action="#">
                                <div class="fileWrapper"> <span class="fileName">Click to upload Document</span>
                                    <input type="file" name="file" id="uploadDocs">
                                </div>
                                <select id="docsSelect">
                                    <option value="" selected></option>
                                    <option value="Payment proof">Payment proof</option>
                                    <option value="Contract">Contract</option>
                                    <option value="Additional">Additional</option>
                                </select>
                                <button id="uploadBtn">Upload</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <h3 class="documentsP">Comments</h3>

            <div class="comments-block">
                <div class="tableComments-block">
                    <table id="table-comments">
                        <thead>
                            <tr>
                                <th>Created by</th>
                                <th>Message</th>
                            </tr>
                        </thead>
                        <tbody id="tableTbody-comments"></tbody>
                    </table>
                </div>

                <div class="commentsInside-block">
                    <form >
                        <textarea id="commentText" placeholder="Comments to Settlement" name="message"></textarea>
                        <input type="submit" id="addCommentBtn" value='Add Comment'>
                    </form>
                </div>
            </div>

            <h3 class="documentsP">Commissions</h3>
            
            <div class="commissions-block">
                <div class="tableCommissions-block">
                    <table id="table-commissions">
                        <thead>
                            <tr>
                                <th>Created by</th>
                                <th>Commission Type</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody id="tableTbody-commissions"></tbody>
                    </table>
                </div>

                <div class="commissionssInside-block">
                    <form>
                        <select name="commissionType" id="commissionType" required>
                            <option value=""></option>
                            <option value="Settlement Anywires Commission">Settlement Anywires Commission</option>
                            <option value="Settlement Solution Commission">Settlement Solution Commission</option>
                        </select>
                        <select name="merchantFees" id="merchantFees" required>
                                <option value=""></option>
                        </select>
                        <div id="commisAmounBlock">
                            <input type="number" class="commissionAmount" placeholder="Amount">
                            <span class="commissionPercent">0%</span>
                        </div>
                        <input type="submit" id="addCommissionsBtn" value='Add Commission' >
                    </form>
                </div>
            </div>

        </div>
    </div>
    <!-- Modal Action Window -->
    <% if(error && error.length > 0) {%>
        <div class="alert" role="alert">
            <div class="alertContent">
                <h3>  <%= error %> </h3>
            </div>
        </div>
    <% } %>
    <% if(success && success.length > 0) {%>
        <div class="alert" role="alert">
            <div class="alertContent">
                <h3>  <%= success %> </h3>
            </div>
        </div>
    <% } %>
    <script type="text/javascript" src="js/sweetalert2.js"></script>
    <script src="js/classie.js"></script>
    <script src="js/gnmenu.js"></script>
    <script>
        new gnMenu( document.getElementById( 'gn-menu' ) );
    </script>
    <script src="js/settlements.js"></script>
    <script type="text/javascript" src="js/authorizationMenu.js"></script>
    <script src="js/menu.js"></script>
</body>
</html>